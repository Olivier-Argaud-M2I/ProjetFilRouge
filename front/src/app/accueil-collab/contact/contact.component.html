<app-nav-bar></app-nav-bar>

<div class="content">

    <div class="intro-y flex items-center mt-8">
        <h2 class="text-lg font-medium mr-auto">Gestion des contacts</h2>
    </div>

    <div id="input" class="p-5">
        <div class="preview" style="display: block;">
            <legend class="font-medium text-lg">Liste des contacts existants</legend>
                
            <div class="grid grid-cols-12 gap-6 mt-5">
                <div class="intro-y col-span-12 md:col-span-6 lg:col-span-4">
                    <div class="box" *ngFor="let contact of contacts">
                        <div class="flex flex-col lg:flex-row items-center px-5 mt-2">
                                <div class="w-24 h-24 lg:w-12 lg:h-12 image-fit lg:mr-1">
                                    <img alt="Image de profil" class="rounded-full" src="../../../assets/pictures/profile-1.jpg">
                                </div>
                                <div class="lg:ml-2 lg:mr-auto text-center lg:text-left mt-3 lg:mt-0">
                                    <p class="capitalize font-medium"> {{contact.collaborator.firstName}} {{contact.collaborator.lastName}}</p>
                                    <p class="text-slate-500 text-xs mt-0.5">{{contact.collaborator.role.name}}</p>
                                </div>
                            
                            <!-- <div class="text-center lg:text-left p-5">
                                <div class="flex items-center justify-center lg:justify-start text-slate-500 mt-5">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide w-3 h-3 mr-2">
                                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                        <polyline points="22,6 12,13 2,6"></polyline>
                                    </svg> 
                                    {{contact.collaborator.email}}
                                </div>
                                <div class="flex items-center justify-center lg:justify-start text-slate-500 mt-1">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide block mx-auto">
                                        <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"></path>
                                    </svg>
                                    {{contact.collaborator.telephone}}
                                </div>
                                <div class="flex items-center justify-center lg:justify-start text-slate-500 mt-1">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide block mx-auto">
                                        <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                    {{contact.collaborator.telephone}}
                                </div>
                            </div> -->
                            <div class="flex mt-4 lg:mt-0">
                                <button class="btn btn-primary py-1 px-2 mr-2" (click)="editer(contact.id)">Modifier</button>
                                <button class="btn btn-outline-secondary py-1 px-2" (click)="removeContact(contact.collaborator)">Supprimer</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

                <!-- <div *ngFor="let contact of contacts" >
                    <p (click)="editer(contact.id)">{{contact.collaborator.lastName}} {{contact.collaborator.firstName}}</p>
                    <button (click)="removeContact(contact.collaborator)">Supprimer</button>
                </div> -->
        


            <form (ngSubmit)="addContact()" [formGroup]="contactForm" class="mt-5">

                <div>
                    <label class="font-medium text-lg">Ajouter un contact</label>
                </div>
                <div class="mt-3">
                    <select name="contact" id="contact" formControlName="contact" class="form-select form-select-lg">
                        <option *ngFor="let contact of possibleContacts; let k = index" [ngValue]="contact" class="capitalize mt-1">
                            {{contact.firstName}} {{contact.lastName}}
                        </option>
                    </select>
                </div>
        
                <div class="mt-3">
                    <input type="submit" value="Valider" [disabled]="contactForm.invalid" class="btn btn-primary py-3 px-4 w-full xl:w-32 xl:mr-3 align-top">
                </div>
        
            </form>
        </div>

    </div>
</div>

